# ๐งช ุทูุจ ุงุฎุชุจุงุฑ ุดุงูู ูุชุดุฎูุต ุงููุธุงู (Comprehensive System Diagnosis Request)

**ุงููุฏู:** ุฅุฌุฑุงุก ูุญุต ุนููู ูุณูุงูุฉ ุงูุจูุงูุงุชุ ุฏูุฉ ุงูุญุณุงุจุงุชุ ูุฃูู ุงููุธุงูุ ูุถูุงู ุฃู ุงูุฃุณุงุณ ุงูุชููู ูุชูู ูุจู ุงูุจุฏุก ูู ุฅุตูุงุญุงุช ุงููุงุฌูุฉ.

---

## 1. ุฅูุดุงุก ุณูุฑูุจุช ุชุดุฎูุต ุดุงูู ุฌุฏูุฏ (`scripts/full-system-diagnose.js`)

ุงูุณูุฑูุจุช ุงููุฏูู (`diagnose-relationships.js`) ุฃุตุจุญ ูุฏููุงู ููุง ูุบุทู ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ. ุงููุทููุจ ูุชุงุจุฉ ุณูุฑูุจุช **Node.js** ุฌุฏูุฏ ูุณุชุฎุฏู `Prisma` ููุชุญูู ูู ุตุญุฉ **ูุงูุฉ** ุงูุนูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

### ุฃ. ุงูุชุญูู ูู ุงูุชุฑุงุจุท (Referential Integrity):
*   **ุงููุณุชุฎุฏููู ูุงูุทุงูุจุงุช:**
    *   ูู ูู `Student` ูุฏูู `userId` ุตุงูุญุ
    *   ูู ูู `User` (ุฏูุฑ Student) ูุฏูู ููู `Student` ูุฑุชุจุทุ
*   **ุงููุนููุงุช ูุงูุญููุงุช:**
    *   ูู ูู `Course` ูุฑุชุจุท ุจู `teacherId` ุตุงูุญุ
*   **ุงูุชุณุฌููุงุช (Enrollments):**
    *   ูู ุชูุฌุฏ ุชุณุฌููุงุช ูุชููุฉ (Orphan Enrollments) ุจุฏูู ุทุงูุจ ุฃู ุญููุฉุ
    *   ูู ููุงู ุชูุฑุงุฑ ูู ุงูุชุณุฌููุงุช ูููุณ ุงูุทุงูุจุฉ ูู ููุณ ุงูุญููุฉุ
*   **ุงูุฏุฑุฌุงุช ูุงูุชููููุงุช (Grades & Points):**
    *   ูุญุต ุฌุฏุงูู `DailyGrade`, `WeeklyGrade`, `MonthlyGrade`, `FinalExam`, `BehaviorGrade`.
    *   ูุญุต ุฌุฏุงูู `BehaviorPoint`, `DailyTask` (ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ).
    *   **ุงูุชุญูู:** ูู ุฌููุน ูุฐู ุงูุณุฌูุงุช ูุฑุชุจุทุฉ ุจู `Student` ู `Course` ููุฌูุฏูู ุจุงููุนูุ

### ุจ. ุงูุชุญูู ูู ุฏูุฉ ุงูุจูุงูุงุช (Logic Integrity):
*   **ุชุถุงุฑุจ ุงูุชูุงุฑูุฎ:** ูู ุชูุฌุฏ ุฏุฑุฌุงุช ููููุฉ ูุณุฌูุฉ ูู ุชูุงุฑูุฎ ูุณุชูุจููุฉุ
*   **ุงูููู ุงูุดุงุฐุฉ:** ูู ุชูุฌุฏ ุฏุฑุฌุงุช ุฎุงุฑุฌ ุงููุทุงู ุงููุณููุญุ (ูุซูุงู: ุฏุฑุฌุฉ ุญูุธ > 5ุ ุฃู ุฏุฑุฌุฉ ุฃุณุจูุนูุฉ > 5ุ ุฃู ุฏุฑุฌุฉ ุณููู > 1).

---

## 2. ุงูุชุญูู ูู ููุทู ุงูุญุณุงุจุงุช (Calculation Logic Verification)

ุฏุงุฎู ููุณ ุงูุณูุฑูุจุช ุฃู ูู ุณูุฑูุจุช ูููุตูุ ูู ุจูุญุงูุงุฉ ุนูููุฉ ุญุณุงุจ ุงูุฏุฑุฌุงุช ููุชุฃูุฏ ูู ุชุทุงุจููุง ูุน `grading-formulas.ts`:

*   ูู ุจุฅูุดุงุก ูุงุฆู ุจูุงูุงุช ูููู (Dummy Data) ูุทุงูุจุฉ ุญุตูุช ุนูู ุงูุนูุงูุฉ ุงููุงููุฉ ูู ูู ุดูุก.
*   ุงุณุชุฎุฏู ุฏูุงู ุงูุญุณุงุจ ุงูููุฌูุฏุฉ ูู ุงููุธุงู.
*   **ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ูุฌุจ ุฃู ูููู ุงููุฌููุน ุงูููุงุฆู **200** ุจุงูุถุจุทุ ูุงููุณุจุฉ **100%**.
*   ูู ุจุชุฌุฑุจุฉ ุณููุงุฑูู "ูุตู ุงูุฏุฑุฌุงุช" ููุชุฃูุฏ ูู ุฏูุฉ ุงููุณูุฑ.

---

## 3. ุงุฎุชุจุงุฑ ุงูุฃูุงู ูุงูุนุฒู (Security & Isolation Test)

ุจูุงุกู ุนูู ุชูุฑูุฑ ูุญุต ุงูู APIุ ูู ุจูุญุงููุฉ ุงุฎุชุฑุงู ุจุณูุทุฉ (Simulation) ููุชุฃูุฏ ูู ุงูุนุฒู:

*   **ุณููุงุฑูู 1:** ูู ุชุณุชุทูุน ูุนููุฉ (Teacher A) ุฌูุจ ุจูุงูุงุช ุญููุฉ ุชุงุจุนุฉ ููุนููุฉ ุฃุฎุฑู (Teacher B) ุนุจุฑ ุงูู API ูุจุงุดุฑุฉุ
*   **ุณููุงุฑูู 2:** ูู ุชุณุชุทูุน ุทุงูุจุฉ ุชุนุฏูู ุฏุฑุฌุงุชูุง ุนุจุฑ ุฅุฑุณุงู ุทูุจ `POST` ูุจุงุดุฑ ูู API ุงูุฏุฑุฌุงุชุ

---

## 4. ุงููุฎุฑุฌุงุช ุงููุทููุจุฉ

*   ููู ุงูุณูุฑูุจุช: `scripts/full-system-diagnose.js`
*   ุชูุฑูุฑ ุงูุชุดุบูู: `DIAGNOSIS_REPORT.md` ูุญุชูู ุนูู ูุชุงุฆุฌ ุชุดุบูู ุงูุณูุฑูุจุช ูุฃู ูุดุงูู ุชู ุงูุนุซูุฑ ุนูููุง.
