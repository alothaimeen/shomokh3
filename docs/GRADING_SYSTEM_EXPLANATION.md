# üìä ŸÜÿ∏ÿßŸÖ ÿßÿ≠ÿ™ÿ≥ÿßÿ® ÿßŸÑÿØÿ±ÿ¨ÿßÿ™ ŸÅŸä ŸÖŸÜÿµÿ© ÿ¥ŸÖŸàÿÆ

Ÿáÿ∞ÿß ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØ Ÿäÿ¥ÿ±ÿ≠ ÿ®ÿßŸÑÿ™ŸÅÿµŸäŸÑ ŸÉŸäŸÅŸäÿ© ÿßÿ≠ÿ™ÿ≥ÿßÿ® ÿßŸÑÿØÿ±ÿ¨ÿßÿ™ ŸÑŸÑÿ∑ÿßŸÑÿ®ÿßÿ™ ŸÅŸä ŸÖŸÜÿµÿ© ÿ¥ŸÖŸàÿÆÿå ŸàŸÉŸäŸÅŸäÿ© ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÜŸáÿßÿ¶Ÿä (200 ÿØÿ±ÿ¨ÿ©)ÿå ÿ®ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÜŸÇÿßÿ∑ ÿßŸÑÿ™ÿ≠ŸÅŸäÿ≤Ÿäÿ©.

---

## üìù ÿ£ŸàŸÑÿßŸã: ÿßŸÑÿØÿ±ÿ¨ÿßÿ™ ÿßŸÑÿ£ŸÉÿßÿØŸäŸÖŸäÿ© (ÿßŸÑŸÖÿ¨ŸÖŸàÿπ: 200 ÿØÿ±ÿ¨ÿ©)

Ÿäÿ™ŸÖ ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ∑ÿßŸÑÿ®ÿ© ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ 5 ŸÖÿπÿßŸäŸäÿ± ÿ±ÿ¶Ÿäÿ≥Ÿäÿ©:

| ÿßŸÑŸÖÿπŸäÿßÿ± | ÿßŸÑÿØÿ±ÿ¨ÿ© ÿßŸÑŸÇÿµŸàŸâ | ÿßŸÑŸÜÿ≥ÿ®ÿ© ŸÖŸÜ ÿßŸÑŸÖÿ¨ŸÖŸàÿπ |
|:---|:---:|:---:|
| **1. ÿßŸÑÿ™ŸÇŸäŸäŸÖ ÿßŸÑŸäŸàŸÖŸä** | **50** | 25% |
| **2. ÿßŸÑÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ£ÿ≥ÿ®ŸàÿπŸä** | **50** | 25% |
| **3. ÿßŸÑÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ¥Ÿáÿ±Ÿä** | **30** | 15% |
| **4. ÿßŸÑÿ≥ŸÑŸàŸÉ ŸàÿßŸÑŸÖŸàÿßÿ∏ÿ®ÿ©** | **10** | 5% |
| **5. ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä** | **60** | 30% |
| **ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÉŸÑŸä** | **200** | **100%** |

### üîç ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®Ÿäÿ© ŸÑŸÉŸÑ ŸÖÿπŸäÿßÿ±

#### 1. ÿßŸÑÿ™ŸÇŸäŸäŸÖ ÿßŸÑŸäŸàŸÖŸä (50 ÿØÿ±ÿ¨ÿ©)
Ÿäÿ™ŸÖ ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ∑ÿßŸÑÿ®ÿ© ŸäŸàŸÖŸäÿßŸã ŸÑŸÖÿØÿ© **70 ŸäŸàŸÖÿßŸã** ÿØÿ±ÿßÿ≥ŸäÿßŸã.
*   **ÿØÿ±ÿ¨ÿ© ÿßŸÑŸäŸàŸÖ ÿßŸÑŸàÿßÿ≠ÿØ:** 10 ÿØÿ±ÿ¨ÿßÿ™ (5 ÿ≠ŸÅÿ∏ + 5 ŸÖÿ±ÿßÿ¨ÿπÿ©).
*   **ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑÿÆÿßŸÖ:** 70 ŸäŸàŸÖÿßŸã √ó 10 ÿØÿ±ÿ¨ÿßÿ™ = **700 ÿØÿ±ÿ¨ÿ©**.
*   **ÿßŸÑŸÖÿπÿßÿØŸÑÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©:** `700 √∑ 14 = 50 ÿØÿ±ÿ¨ÿ©`.

#### 2. ÿßŸÑÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ£ÿ≥ÿ®ŸàÿπŸä (50 ÿØÿ±ÿ¨ÿ©)
Ÿäÿ™ŸÖ ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ∑ÿßŸÑÿ®ÿ© ÿ£ÿ≥ÿ®ŸàÿπŸäÿßŸã ŸÑŸÖÿØÿ© **10 ÿ£ÿ≥ÿßÿ®Ÿäÿπ**.
*   **ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ ÿßŸÑŸàÿßÿ≠ÿØ:** 5 ÿØÿ±ÿ¨ÿßÿ™.
*   **ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÜŸáÿßÿ¶Ÿä:** 10 ÿ£ÿ≥ÿßÿ®Ÿäÿπ √ó 5 ÿØÿ±ÿ¨ÿßÿ™ = **50 ÿØÿ±ÿ¨ÿ©**.

#### 3. ÿßŸÑÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ¥Ÿáÿ±Ÿä (30 ÿØÿ±ÿ¨ÿ©)
Ÿäÿ™ŸÖ ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ∑ÿßŸÑÿ®ÿ© ÿ¥Ÿáÿ±ŸäÿßŸã ŸÑŸÖÿØÿ© **3 ÿ£ÿ¥Ÿáÿ±**.
*   **ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ¥Ÿáÿ± ÿßŸÑŸàÿßÿ≠ÿØ:** 30 ÿØÿ±ÿ¨ÿ© (ŸÇÿ±ÿ¢ŸÜ Ÿàÿ™ÿ¨ŸàŸäÿØ).
*   **ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑÿÆÿßŸÖ:** 3 ÿ£ÿ¥Ÿáÿ± √ó 30 ÿØÿ±ÿ¨ÿ© = **90 ÿØÿ±ÿ¨ÿ©**.
*   **ÿßŸÑŸÖÿπÿßÿØŸÑÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©:** `90 √∑ 3 = 30 ÿØÿ±ÿ¨ÿ©`.

#### 4. ÿßŸÑÿ≥ŸÑŸàŸÉ ŸàÿßŸÑŸÖŸàÿßÿ∏ÿ®ÿ© (10 ÿØÿ±ÿ¨ÿßÿ™)
Ÿäÿ™ŸÖ ÿ±ÿµÿØ ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≥ŸÑŸàŸÉ ŸäŸàŸÖŸäÿßŸã ŸÑŸÖÿØÿ© **70 ŸäŸàŸÖÿßŸã**.
*   **ÿØÿ±ÿ¨ÿ© ÿßŸÑŸäŸàŸÖ ÿßŸÑŸàÿßÿ≠ÿØ:** 1 ÿØÿ±ÿ¨ÿ©.
*   **ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑÿÆÿßŸÖ:** 70 ŸäŸàŸÖÿßŸã √ó 1 ÿØÿ±ÿ¨ÿ© = **70 ÿØÿ±ÿ¨ÿ©**.
*   **ÿßŸÑŸÖÿπÿßÿØŸÑÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©:** `70 √∑ 7 = 10 ÿØÿ±ÿ¨ÿßÿ™`.

#### 5. ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä (60 ÿØÿ±ÿ¨ÿ©)
*   **ÿ™Ÿàÿ≤Ÿäÿπ ÿßŸÑÿØÿ±ÿ¨ÿßÿ™:** 40 ŸÇÿ±ÿ¢ŸÜ + 20 ÿ™ÿ¨ŸàŸäÿØ = **60 ÿØÿ±ÿ¨ÿ©**.

---

## üåü ÿ´ÿßŸÜŸäÿßŸã: ÿßŸÑŸÜŸÇÿßÿ∑ ÿßŸÑÿ™ÿ≠ŸÅŸäÿ≤Ÿäÿ© (ÿßŸÑŸÖÿ¨ŸÖŸàÿπ: 2450 ŸÜŸÇÿ∑ÿ©)

Ÿáÿ∞ÿß ŸÜÿ∏ÿßŸÖ ŸÖŸÜŸÅÿµŸÑ ÿπŸÜ ÿßŸÑÿØÿ±ÿ¨ÿßÿ™ ÿßŸÑÿ£ŸÉÿßÿØŸäŸÖŸäÿ©ÿå ŸäŸáÿØŸÅ ŸÑÿ™ÿ≠ŸÅŸäÿ≤ ÿßŸÑÿ∑ÿßŸÑÿ®ÿßÿ™ ÿπŸÑŸâ ÿßŸÑÿßÿ¨ÿ™ŸáÿßÿØ ŸàÿßŸÑÿßŸÜÿ∂ÿ®ÿßÿ∑.

| ÿßŸÑŸÜŸàÿπ | ÿßŸÑŸÜŸÇÿßÿ∑ ÿßŸÑŸäŸàŸÖŸäÿ© | ÿπÿØÿØ ÿßŸÑÿ£ŸäÿßŸÖ | ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÉŸÑŸä |
|:---|:---:|:---:|:---:|
| **1. ÿßŸÑŸÖŸáÿßŸÖ ÿßŸÑÿ∞ÿßÿ™Ÿäÿ© (ŸÑŸÑÿ∑ÿßŸÑÿ®ÿ©)** | **15** | 70 | **1050** |
| **2. ÿßŸÑŸÜŸÇÿßÿ∑ ÿßŸÑÿ≥ŸÑŸàŸÉŸäÿ© (ŸÑŸÑŸÖÿπŸÑŸÖÿ©)** | **20** | 70 | **1400** |
| **ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÉŸÑŸä** | **35** | - | **2450** |

### üîç ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÜŸÇÿßÿ∑

#### 1. ÿßŸÑŸÖŸáÿßŸÖ ÿßŸÑÿ∞ÿßÿ™Ÿäÿ© (1050 ŸÜŸÇÿ∑ÿ©)
ÿ™ŸÇŸàŸÖ ÿßŸÑÿ∑ÿßŸÑÿ®ÿ© ÿ®ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ•ŸÜÿ¨ÿßÿ≤Ÿáÿß ŸÑŸáÿ∞Ÿá ÿßŸÑŸÖŸáÿßŸÖ ŸäŸàŸÖŸäÿßŸã:
*   **ÿßŸÑÿ≥ŸÖÿßÿπ 5 ŸÖÿ±ÿßÿ™:** 5 ŸÜŸÇÿßÿ∑.
*   **ÿßŸÑÿ™ŸÉÿ±ÿßÿ± 10 ŸÖÿ±ÿßÿ™:** 5 ŸÜŸÇÿßÿ∑.
*   **ÿßŸÑÿ≥ÿ±ÿØ ÿπŸÑŸâ ÿßŸÑÿ±ŸÅŸäŸÇÿ©:** 5 ŸÜŸÇÿßÿ∑.
*   **ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸäŸàŸÖŸä:** 15 ŸÜŸÇÿ∑ÿ©.

#### 2. ÿßŸÑŸÜŸÇÿßÿ∑ ÿßŸÑÿ≥ŸÑŸàŸÉŸäÿ© (1400 ŸÜŸÇÿ∑ÿ©)
ÿ™ŸÇŸàŸÖ ÿßŸÑŸÖÿπŸÑŸÖÿ© ÿ®ÿ±ÿµÿØ Ÿáÿ∞Ÿá ÿßŸÑŸÜŸÇÿßÿ∑ ŸÑŸÑÿ∑ÿßŸÑÿ®ÿ© ŸäŸàŸÖŸäÿßŸã:
*   **ÿßŸÑÿ≠ÿ∂Ÿàÿ± ÿßŸÑŸÖÿ®ŸÉÿ±:** 5 ŸÜŸÇÿßÿ∑.
*   **ÿßŸÑÿ≠ŸÅÿ∏ ÿßŸÑŸÖÿ™ŸÇŸÜ:** 5 ŸÜŸÇÿßÿ∑.
*   **ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÅÿπÿßŸÑÿ©:** 5 ŸÜŸÇÿßÿ∑.
*   **ÿßŸÑÿßŸÑÿ™ÿ≤ÿßŸÖ ÿ®ÿßŸÑŸàŸÇÿ™:** 5 ŸÜŸÇÿßÿ∑.
*   **ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸäŸàŸÖŸä:** 20 ŸÜŸÇÿ∑ÿ©.

---

## üìà ÿ™ŸÇÿØŸäÿ± ÿßŸÑÿØÿ±ÿ¨ÿßÿ™ (ÿßŸÑŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ¶ŸàŸäÿ©)

Ÿäÿ™ŸÖ ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ¶ŸàŸäÿ© ŸÑŸÑÿØÿ±ÿ¨ÿßÿ™ ÿßŸÑÿ£ŸÉÿßÿØŸäŸÖŸäÿ© ÿ®ŸÇÿ≥ŸÖÿ© ŸÖÿ¨ŸÖŸàÿπ ÿßŸÑÿ∑ÿßŸÑÿ®ÿ© ÿπŸÑŸâ 2.

| ÿßŸÑŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ¶ŸàŸäÿ© | ÿßŸÑÿ™ŸÇÿØŸäÿ± |
|:---:|:---:|
| **90% - 100%** | **ŸÖŸÖÿ™ÿßÿ≤** üü¢ |
| **80% - 89%** | **ÿ¨ŸäÿØ ÿ¨ÿØÿßŸã** üü° |
| **70% - 79%** | **ÿ¨ŸäÿØ** üü† |
| **60% - 69%** | **ŸÖŸÇÿ®ŸàŸÑ** üü† |
| **ÿ£ŸÇŸÑ ŸÖŸÜ 60%** | **ÿ∂ÿπŸäŸÅ** üî¥ |

# üõ†Ô∏è Grading System - Technical Reference

> **Target Audience:** AI Models & Developers
> **Purpose:** Comprehensive guide to the grading logic, formulas, and code locations.
> **Last Updated:** 2025-11-30

---

## üìê Core Formulas & Logic

The system uses a **200-point scale** for the final grade.

### 1. Daily Grades (`DailyGrade`)
*   **Source Table:** `daily_grades`
*   **Logic:**
    *   `memorization` (0-5) + `review` (0-5) = **10 points/day**
    *   **Raw Total:** Sum of all records (Target: 70 days √ó 10 = 700)
    *   **Normalization:** `Raw Total / 14`
    *   **Max Normalized:** `700 / 14 = 50`

### 2. Weekly Grades (`WeeklyGrade`)
*   **Source Table:** `weekly_grades`
*   **Logic:**
    *   `grade` (0-5) = **5 points/week**
    *   **Raw Total:** Sum of all records (Target: 10 weeks √ó 5 = 50)
    *   **Normalization:** None (Raw Total is used directly)
    *   **Max Total:** **50**

### 3. Monthly Grades (`MonthlyGrade`)
*   **Source Table:** `monthly_grades`
*   **Logic:**
    *   `quranForgetfulness` (0-5) + `quranMajorMistakes` (0-5) + `quranMinorMistakes` (0-5) + `tajweedTheory` (0-15) = **30 points/month**
    *   **Raw Total:** Sum of all records (Target: 3 months √ó 30 = 90)
    *   **Normalization:** `Raw Total / 3`
    *   **Max Normalized:** `90 / 3 = 30`

### 4. Behavior Grades (`BehaviorGrade`)
*   **Source Table:** `behavior_grades`
*   **Logic:**
    *   `dailyScore` (0-1) = **1 point/day**
    *   **Raw Total:** Sum of all records (Target: 70 days √ó 1 = 70)
    *   **Normalization:** `Raw Total / 7`
    *   **Max Normalized:** `70 / 7 = 10`

### 5. Final Exam (`FinalExam`)
*   **Source Table:** `final_exams`
*   **Logic:**
    *   `quranTest` (0-40) + `tajweedTest` (0-20) = **60 points**
    *   **Max Total:** **60**

### 6. Final Calculation
```typescript
Overall Total = 
  (Daily Raw / 14) + 
  (Weekly Raw) + 
  (Monthly Raw / 3) + 
  (Behavior Raw / 7) + 
  (Final Exam Total)

// Max Score: 50 + 50 + 30 + 10 + 60 = 200
```

---

## üåü Incentive Points System

Separate from the academic grading, used for motivation.

### 1. Daily Tasks (`DailyTask`)
*   **Source Table:** `daily_tasks`
*   **Input:** Student (Self-reported)
*   **Logic:**
    *   `listening5Times` = **5 points**
    *   `repetition10Times` = **5 points**
    *   `recitedToPeer` = **5 points**
    *   **Total per Day:** **15 points**
    *   **Max Total:** 70 days √ó 15 = **1050 points**

### 2. Behavior Points (`BehaviorPoint`)
*   **Source Table:** `behavior_points`
*   **Input:** Teacher
*   **Logic:**
    *   `earlyAttendance` = **5 points**
    *   `perfectMemorization` = **5 points**
    *   `activeParticipation` = **5 points**
    *   `timeCommitment` = **5 points**
    *   **Total per Day:** **20 points**
    *   **Max Total:** 70 days √ó 20 = **1400 points**

### Total Incentive Points
```typescript
Total = Daily Tasks (1050) + Behavior Points (1400) = 2450 Points
```

---

## üìÇ Code Locations

### 1. Calculation Logic (Primary Source of Truth)
*   **File:** `src/actions/reports.ts`
*   **Function:** `getAcademicReportData` (Academic), `getBehaviorPointsReportData` (Incentive)
*   **Description:** Contains the actual aggregation and normalization logic used in reports.

### 2. Helper Formulas (Reference)
*   **File:** `src/lib/grading-formulas.ts`
*   **Description:** Contains pure functions for calculations. Used by UI components for immediate feedback, but `reports.ts` is the authority for final reports.

### 3. Database Schema
*   **File:** `prisma/schema.prisma`
*   **Models:** `DailyGrade`, `WeeklyGrade`, `MonthlyGrade`, `BehaviorGrade`, `FinalExam`, `DailyTask`, `BehaviorPoint`.

---

## üîó Dependencies & Affected Pages

### Pages Displaying Grades
1.  **Academic Reports:** `src/app/(dashboard)/academic-reports/page.tsx`
2.  **Behavior Points Report:** `src/app/(dashboard)/behavior-points-report/page.tsx`
3.  **Student Dashboard:** `src/components/dashboard/StudentDashboard.tsx`

### Pages for Data Entry
1.  **Daily:** `src/app/(dashboard)/daily-grades/page.tsx`
2.  **Weekly:** `src/app/(dashboard)/weekly-grades/page.tsx`
3.  **Monthly:** `src/app/(dashboard)/monthly-grades/page.tsx`
4.  **Behavior (Academic):** `src/app/(dashboard)/behavior-grades/page.tsx`
5.  **Final Exam:** `src/app/(dashboard)/final-exam/page.tsx`
6.  **Tasks (Student):** `src/app/(dashboard)/self-tasks/page.tsx`
7.  **Behavior Points (Teacher):** `src/app/(dashboard)/behavior-points/page.tsx`

---

## ‚ö†Ô∏è Critical Notes

1.  **Normalization Factors:** The divisors (14, 3, 7) are currently hardcoded in `src/actions/reports.ts`.
2.  **Behavior Distinction:**
    *   `BehaviorGrade` = **Academic Grade** (Max 10). Part of the 200 total.
    *   `BehaviorPoint` = **Incentive Points** (Max 1400). Part of the 2450 total.
    *   **DO NOT CONFUSE THEM.**
