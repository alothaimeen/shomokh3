# مواصفات منصة شموخ - المرجع الوظيفي الشامل
> المرجع الأساسي للتطوير والصيانة | آخر تحديث: 25 سبتمبر 2025

## فهرس المحتويات التفصيلي
- [1. نظرة عامة على المنصة](#1-نظرة-عامة-على-المنصة)
- [2. الأدوار والصلاحيات التفصيلية](#2-الأدوار-والصلاحيات-التفصيلية)
- [3. الأنظمة الأساسية الثلاثة](#3-الأنظمة-الأساسية-الثلاثة)
- [4. سير العمل الكامل](#4-سير-العمل-الكامل)
- [5. دليل الواجهات والصفحات الشامل](#5-دليل-الواجهات-والصفحات-الشامل)
- [6. APIs ونقاط النهاية](#6-apis-ونقاط-النهاية)
- [7. التكاملات الخارجية المُفعلة](#7-التكاملات-الخارجية-المُفعلة)
- [8. قواعد العمل والسياسات الداخلية](#8-قواعد-العمل-والسياسات-الداخلية)
- [9. القواعد التقنية الحرجة](#9-القواعد-التقنية-الحرجة)
- [10. المعلومات المتضاربة للمراجعة](#10-المعلومات-المتضاربة-للمراجعة)

---

## 1. نظرة عامة على المنصة

### 1.1 الهدف والغرض
منصة شموخ هي نظام تعليمي متكامل مخصص لتعليم القرآن الكريم وعلوم التجويد للطالبات. تقدم المنصة نظامًا شاملاً لإدارة الحلقات القرآنية والتقييم والمتابعة.

### 1.2 المستخدمون المستهدفون (3 أدوار)

#### أ. المديرات (Admin) - إدارة شاملة
- **الصلاحيات:** إدارة كاملة للنظام
- **عدد الصفحات:** 21 صفحة
- **الوظائف الرئيسية:**
  - إدارة المستخدمين والصلاحيات
  - إدارة البرامج والحلقات
  - مراقبة الأداء والإحصائيات
  - إدارة الشهادات وقوالبها
  - إعدادات النظام

#### ب. المعلمات (Teacher) - إدارة تعليمية
- **الصلاحيات:** إدارة حلقاتهن وطالباتهن
- **عدد الصفحات:** 14 صفحة
- **الوظائف الرئيسية:**
  - إدارة الدرجات والتقييم اليومي
  - متابعة الحضور والغياب
  - إدارة النقاط التحفيزية
  - إصدار الشهادات

#### ج. الطالبات (Student) - متابعة شخصية
- **الصلاحيات:** عرض بياناتهن الشخصية والتفاعل
- **عدد الصفحات:** 8 صفحات
- **الوظائف الرئيسية:**
  - عرض الدرجات والتقدم
  - تسجيل المهام اليومية
  - عرض الحضور والغياب
  - التقديم للحلقات الجديدة

### 1.3 النطاق الوظيفي الحالي
- **حالة المشروع:** 95% مكتمل وعامل
- **الصفحات المنجزة:** 95+ صفحة
- **واجهات API:** 110+ endpoints
- **الحالة التشغيلية:** مُنتج ومنشور على https://shomokh.alothaimeen.xyz/

### 1.4 التقنيات المستخدمة
```javascript
{
  "framework": "Next.js 15.5.2 with App Router",
  "ui": "React 19.1.0 + TypeScript",
  "styling": "Tailwind CSS + Radix UI components",
  "database": "PostgreSQL with Prisma ORM (Supabase)",
  "auth": "NextAuth.js with Credentials provider",
  "deployment": "Production deployment ready"
}
```

### 1.5 بيانات الاختبار المعتمدة
```bash
# مدير
admin@shamokh.edu / admin123

# معلمة
teacher1@shamokh.edu / teacher123

# طالبة
student1@shamokh.edu / student123
```

### 1.6 معايير التسمية الموحدة (camelCase)

#### فلسفة التسمية المعتمدة:
تعتمد منصة شموخ v3 على **camelCase في كل مكان** لضمان الاتساق المطلق وتجنب أخطاء التطوير. هذا المعيار تم اعتماده بعد تحليل أسباب انهيار الإصدارات السابقة التي كانت تخلط بين أنماط تسمية مختلفة.

#### المعايير المطبقة:
```typescript
// ✅ المعايير الصحيحة (camelCase موحد)
interface User {
  id: string;
  userName: string;        // ليس name أو user_name
  userEmail: string;       // ليس email أو user_email  
  passwordHash: string;    // ليس password (أوضح دلالياً)
  userRole: UserRole;      // واضح أنه دور المستخدم
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}

interface Program {
  id: string;
  programName: string;     // ليس title أو program_title
  description?: string;
  isActive: boolean;
}

interface Course {
  id: string;
  courseName: string;      // ليس title أو course_title
  programId: string;
  teacherId: string;
}
```

#### مبررات هذا الاختيار:
- **الاتساق:** نفس النمط في قاعدة البيانات والكود
- **الوضوح:** أسماء واضحة دلالياً لتقليل الأخطاء
- **البساطة:** نمط واحد بدلاً من خلط أنماط متعددة
- **الأمان:** تجنب أخطاء الربط بين قاعدة البيانات والكود

---

## 2. الأدوار والصلاحيات التفصيلية

### 2.1 دور المدير (Admin) - 21 صفحة

#### الصلاحيات الكاملة والاستثنائية:
- **إدارة المستخدمين:** إضافة، تعديل، حذف جميع المستخدمين
- **إدارة البرامج والحلقات:** إنشاء وتعديل البرامج التعليمية
- **مراقبة النظام:** الوصول لجميع الإحصائيات والتقارير
- **إدارة الشهادات:** تصميم القوالب وإعدادات النظام
- **صلاحيات التطوير:** الوصول لأدوات المطورين والمراقبة

#### قائمة الصفحات الإدارية (21 صفحة):
```
/dashboard/admin/
├── page.tsx                      # الصفحة الرئيسية
├── main-dashboard/               # اللوحة الرئيسية
├── analytics/                    # التحليلات والإحصائيات
├── assessment-history/           # سجل التقييمات
├── certificates/                 # إدارة الشهادات
│   ├── page.tsx                  # قائمة الشهادات
│   ├── new/                      # إنشاء شهادة جديدة
│   └── templates/                # إدارة القوالب
│       └── preview/              # معاينة وتعديل القوالب
├── courses/                      # إدارة الحلقات
│   ├── page.tsx                  # قائمة الحلقات
│   ├── new/                      # إضافة حلقة جديدة
│   └── [id]/edit/                # تعديل حلقة
├── grades-statistics/            # إحصائيات الدرجات
├── grading-system/               # إعدادات نظام الدرجات
├── integrations/                 # التكاملات الخارجية
├── last-seen/                    # متابعة آخر ظهور للمستخدمين
├── monitoring/                   # مراقبة النظام
├── quick-actions/                # الإجراءات السريعة
└── users/                        # إدارة المستخدمين
```

### 2.2 دور المعلمة (Teacher) - 14 صفحة

#### الصلاحيات المحددة والقيود:
- **إدارة طالباتها فقط:** الوصول محدود للطالبات المسجلات في حلقاتها
- **التقييم والدرجات:** رصد وتعديل درجات طالباتها
- **الشهادات:** إصدار شهادات لطالباتها المستحقات
- **التقارير:** عرض تقارير خاصة بحلقاتها وطالباتها

#### الصفحات الحرجة الثلاث:
1. **`/dashboard/teacher/grades`** - نظام الدرجات الموحد (الأهم)
2. **`/dashboard/teacher/attendance`** - إدارة الحضور والغياب
3. **`/dashboard/teacher/manage-students`** - إدارة الطالبات والتسجيلات

#### قائمة الصفحات الكاملة (14 صفحة):
```
/dashboard/teacher/
├── page.tsx                      # الصفحة الرئيسية
├── main-dashboard/               # اللوحة الرئيسية
├── grades/                       # نظام الدرجات الموحد ⭐
├── attendance/                   # الحضور والغياب ⭐
├── manage-students/              # إدارة الطالبات ⭐
├── certificates/                 # إدارة الشهادات
│   ├── page.tsx                  # قائمة الشهادات
│   ├── generate/                 # توليد شهادات جديدة
│   └── archive/                  # أرشيف الشهادات
├── courses/                      # معلومات الحلقات
├── enrollment-requests/          # طلبات التسجيل
├── progress/                     # متابعة التقدم
├── reports/                      # التقارير
└── achievements/                 # الإنجازات والمكافآت
```

### 2.3 دور الطالبة (Student) - 8 صفحات

#### الصلاحيات المحدودة:
- **عرض البيانات الشخصية فقط:** لا يمكن رؤية بيانات طالبات أخريات
- **تسجيل المهام:** تأكيد إتمام المهام اليومية
- **التقديم للحلقات:** طلب الانضمام للحلقات المتاحة
- **المتابعة:** عرض الدرجات والحضور والتقدم

#### رحلة الطالبة الكاملة:
1. **التسجيل:** إنشاء حساب والتحقق
2. **استكشاف البرامج:** تصفح البرامج والحلقات المتاحة
3. **التقديم:** طلب الانضمام للحلقات المناسبة
4. **القبول:** انتظار موافقة المعلمة
5. **المتابعة اليومية:** تسجيل المهام ومتابعة الدرجات
6. **الإنجاز:** الحصول على الشهادات عند الاستحقاق

#### قائمة الصفحات (8 صفحات):
```
/dashboard/student/
├── page.tsx                      # الصفحة الرئيسية
├── main-dashboard/               # اللوحة الرئيسية
├── programs/                     # استكشاف البرامج المتاحة
├── courses/                      # حلقاتي الحالية
├── results/                      # الدرجات والنتائج
├── attendance/                   # سجل الحضور
├── achievements/                 # الإنجازات والشهادات
└── schedule/                     # الجدول الدراسي
```

---

## 3. الأنظمة الأساسية الثلاثة

### 3.1 نظام الدرجات الأكاديمي (200 درجة)

#### توزيع الدرجات:
| نوع التقييم | الدرجة | طريقة الحساب | الفترة |
|-------------|---------|---------------|---------|
| **التقييم اليومي** | 50 درجة | 70 يوم × 10 درجات ÷ 14 | يومي |
| **التقييم الأسبوعي** | 50 درجة | 10 اختبارات × 5 درجات | أسبوعي |
| **التقييم الشهري** | 30 درجة | 3 اختبارات × 30 درجة ÷ 3 | شهري |
| **الاختبار النهائي** | 60 درجة | قرآن (40) + تجويد (20) | نهاية الفصل |
| **السلوك والمواظبة** | 10 درجات | 70 يوم ÷ 7 | يومي |

#### الحساب النهائي: 200 درجة ÷ 2 = 100%

#### تفاصيل التقييم اليومي (50 درجة):
- **حفظ القرآن:** 2.5 درجة
- **حفظ التجويد:** 2.5 درجة
- **مراجعة القرآن:** 2.5 درجة
- **مراجعة التجويد:** 2.5 درجة
- **المجموع اليومي:** 10 درجات

#### معايير التقييم والخصومات:
- **نسيان كلمة:** -0.5 درجة
- **نسيان حرف:** -0.25 درجة
- **لحن جلي:** -0.5 درجة
- **لحن خفي:** -0.25 درجة

### 3.2 نظام النقاط التحفيزية (2450 نقطة)

#### المهام الذاتية (1050 نقطة):
| المهمة | النقاط | التفاصيل |
|--------|--------|----------|
| السماع 5 مرات | 5 نقاط | الاستماع للشيخ |
| التكرار 10 مرات | 5 نقاط | تكرار المحفوظ |
| السرد على الرفيقة | 5 نقاط | المراجعة مع زميلة |

**الحساب:** 15 نقطة يومياً × 70 يوم = 1050 نقطة

#### النقاط السلوكية (1400 نقطة):
| المعيار | النقاط | المسؤول عن التقييم |
|---------|--------|-------------------|
| حضور مبكر | 5 نقاط | المعلمة |
| حفظ متقن | 5 نقاط | المعلمة |
| مشاركة فعالة | 5 نقاط | المعلمة |
| التزام بالوقت | 5 نقاط | المعلمة |

**الحساب:** 20 نقطة يومياً × 70 يوم = 1400 نقطة

#### قواعد العمل:
- نظام الدرجات منفصل تماماً عن نظام النقاط التحفيزية
- المهام الذاتية تعتمد على أمانة الطالبة
- النقاط السلوكية تُقيم من المعلمة
- لا يوجد ربط حسابي بين الدرجات والنقاط

### 3.3 نظام القبول والتسجيل

#### عملية التقديم للطالبات:
1. **تصفح البرامج المتاحة:** عبر `/dashboard/student/programs`
2. **اختيار الحلقة المناسبة:** حسب المستوى والوقت
3. **تقديم طلب الانضمام:** مع إمكانية إضافة ملاحظات
4. **انتظار الموافقة:** من المعلمة المسؤولة
5. **التسجيل النهائي:** عند القبول

#### مراجعة وقبول الطلبات:
- **صفحة المراجعة:** `/dashboard/teacher/manage-students`
- **خيارات المعلمة:**
  - قبول فردي
  - رفض مع السبب
  - قبول جماعي
  - تفعيل القبول التلقائي

#### إدارة المقاعد والحلقات:
- **الحد الأقصى:** 30 طالبة لكل حلقة (قابل للتعديل)
- **متابعة العدد:** عداد تلقائي للمقاعد المتاحة
- **قائمة الانتظار:** عند امتلاء الحلقة (مخطط مستقبلي)

#### القيود والسياسات:
- **فترة الحظر:** 30 يوم بعد رفض الطلب
- **طلب واحد فقط:** لا يمكن التقديم لنفس الحلقة مرتين
- **التحقق من الأهلية:** حسب المستوى والمتطلبات

### 3.4 أنظمة مساندة

#### نظام الحضور والغياب:
- **رموز الحضور:**
  - **ح** = حاضرة
  - **ث** = تأخر
  - **خ** = غياب
  - **ر** = راحة
- **حساب النسب:** تلقائي مع التقارير
- **التنبيهات:** عند تكرار الغياب

#### نظام الشهادات مع صفحة التحقق:
- **8 قوالب شهادات:** تحفة الأطفال، الجزرية، الحفظ، إلخ
- **إصدار فردي وجماعي:** حتى 2000 شهادة
- **صفحة التحقق العامة:** `/verify` للتحقق من صحة الشهادات
- **رمز تحقق فريد:** لكل شهادة صادرة

#### نظام التنبيهات والإشعارات:
- **إشعارات داخلية:** عبر النظام
- **تقارير دورية:** للمتابعة والتقييم

---

#### الصفحات الإضافية:
5. **الصفحة الرئيسية** (`/dashboard/teacher/`)
6. **اللوحة الرئيسية** (`/dashboard/teacher/main-dashboard/`)
7. **إدارة الشهادات** (`/dashboard/teacher/certificates/`)
8. **توليد الشهادات** (`/dashboard/teacher/certificates/generate/`)
9. **أرشيف الشهادات** (`/dashboard/teacher/certificates/archive/`)
10. **معلومات الحلقات** (`/dashboard/teacher/courses/`)
11. **طلبات التسجيل** (`/dashboard/teacher/enrollment-requests/`)
12. **متابعة التقدم** (`/dashboard/teacher/progress/`)
13. **التقارير** (`/dashboard/teacher/reports/`)
14. **الإنجازات** (`/dashboard/teacher/achievements/`)

### 5.3 صفحات الطالبة (8 صفحات)

#### الصفحات الأساسية:
1. **الصفحة الرئيسية** (`/dashboard/student/`)
   - معلومات الحساب الشخصي
   - أحدث الأنشطة
   - الإشعارات الجديدة

2. **اللوحة الرئيسية** (`/dashboard/student/main-dashboard/`)
   - ملخص التقدم
   - الدرجات الحديثة
   - المهام اليومية

#### صفحات الاستكشاف والتسجيل:
3. **استكشاف البرامج** (`/dashboard/student/programs/`)
   - عرض جميع البرامج المتاحة
   - تفاصيل الحلقات
   - تقديم طلبات الانضمام

4. **حلقاتي الحالية** (`/dashboard/student/courses/`)
   - الحلقات المسجلة فيها
   - تسجيل المهام اليومية
   - معلومات المعلمات

#### صفحات المتابعة:
5. **الدرجات والنتائج** (`/dashboard/student/results/`)
6. **سجل الحضور** (`/dashboard/student/attendance/`)
7. **الإنجازات والشهادات** (`/dashboard/student/achievements/`)
8. **الجدول الدراسي** (`/dashboard/student/schedule/`)

### 5.4 صفحات عامة ومساعدة

#### صفحات المصادقة:
- **تسجيل الدخول** (`/login`)
- **تسجيل حساب جديد** (مخطط مستقبلي)

#### صفحات عامة:
- **التحقق من الشهادات** (`/verify`)
  - إدخال رمز التحقق
  - عرض تفاصيل الشهادة
  - التحقق من الصحة

---

## 6. APIs ونقاط النهاية (110+ endpoints)

### 6.1 Authentication APIs
```
GET/POST /api/auth/[...nextauth]    # NextAuth endpoints
GET      /api/profile               # معلومات المستخدم
```

### 6.2 Student APIs (10+ endpoints)
```
GET  /api/student/programs          # البرامج المتاحة
GET  /api/student/enrollment-status # حالة التسجيلات
POST /api/student/enrollment/request # طلب انضمام
GET  /api/student/courses           # الحلقات المسجلة
GET  /api/student/grades            # الدرجات والنقاط
GET  /api/student/attendance        # سجل الحضور
GET  /api/student/achievements      # الإنجازات
GET  /api/student/progress          # التقدم
GET  /api/student/points            # النقاط التحفيزية
GET  /api/students                  # قائمة الطالبات (للمدير)
GET  /api/students/[id]             # طالبة محددة
GET  /api/students/available        # الطالبات المتاحات
```

### 6.3 Teacher APIs (25+ endpoints)
```
# إدارة الحلقات
GET  /api/teacher/courses           # حلقات المعلمة
GET  /api/teacher/courses/[id]      # تفاصيل حلقة
GET  /api/teacher/courses/[id]/students # طالبات الحلقة
POST /api/teacher/courses/[id]/students/add # إضافة طالبة
DELETE /api/teacher/courses/[id]/students/[studentId]/remove # إزالة طالبة

# إدارة الطلبات
GET  /api/teacher/courses/[id]/enrollment-requests # طلبات الانضمام
GET  /api/teacher/courses/[id]/available-students  # الطالبات المتاحات
POST /api/teacher/courses/[id]/toggle-auto-accept  # تبديل القبول التلقائي
POST /api/teacher/enrollment-requests/[requestId]/approve # قبول طلب
POST /api/teacher/enrollment-requests/[requestId]/reject  # رفض طلب

# الدرجات والتقييم
GET  /api/teacher/grades            # جلب الدرجات
POST /api/teacher/grades/bulk       # حفظ مجمع للدرجات
GET  /api/teacher/attendance        # الحضور والغياب

# التقارير والإحصائيات
GET  /api/teacher/reports           # التقارير
POST /api/teacher/reports/export    # تصدير التقارير
GET  /api/teacher/stats             # الإحصائيات


# المكافآت والإنجازات
GET  /api/teacher/achievements/stats # إحصائيات الإنجازات
POST /api/teacher/achievements/grant # منح إنجاز
GET  /api/teacher/rewards           # المكافآت
POST /api/teacher/rewards/redeem    # استبدال مكافأة
```

### 6.4 Admin APIs (15+ endpoints)
```
# إدارة المستخدمين
GET    /api/users                  # قائمة المستخدمين
POST   /api/users                  # إضافة مستخدم
PUT    /api/users                  # تحديث مستخدم

# إدارة البرامج والحلقات
GET    /api/programs               # البرامج
POST   /api/programs               # إضافة برنامج
GET    /api/courses                # الحلقات
POST   /api/courses                # إضافة حلقة

# الإحصائيات والمراقبة
GET    /api/admin/analytics        # التحليلات
GET    /api/admin/monitoring       # المراقبة
GET    /api/admin/grades-statistics # إحصائيات الدرجات

# إدارة النظام
GET    /api/monitoring             # مراقبة النظام
GET    /api/health                 # حالة النظام
```

### 6.5 Grades APIs (14+ endpoints)
```
# الدرجات الأساسية
GET  /api/grades/daily             # الدرجات اليومية
POST /api/grades/daily             # حفظ درجات يومية
GET  /api/grades/weekly            # الاختبارات الأسبوعية
POST /api/grades/weekly            # حفظ اختبار أسبوعي
GET  /api/grades/monthly           # الاختبارات الشهرية
POST /api/grades/monthly           # حفظ اختبار شهري
GET  /api/grades/final             # الاختبار النهائي
POST /api/grades/final             # حفظ اختبار نهائي
GET  /api/grades/behavior          # درجات السلوك
POST /api/grades/behavior          # حفظ درجات سلوك

# العمليات والحسابات
POST /api/grades/calculate         # حساب الدرجات
POST /api/grades/calculate-final   # حساب الدرجات النهائية
GET  /api/grades/final-report      # التقرير النهائي
```

### 6.6 Certificates APIs (10+ endpoints)
```
# إدارة القوالب
GET    /api/certificates/templates          # قائمة القوالب
POST   /api/certificates/templates          # إضافة قالب
POST   /api/certificates/templates/upload   # رفع قالب
PATCH  /api/certificates/templates/[id]     # تحديث قالب
DELETE /api/certificates/templates/[id]     # حذف قالب
POST   /api/certificates/templates/update-config # حفظ إعدادات

# توليد الشهادات
POST /api/certificates/generate     # توليد شهادة
GET  /api/certificates/preview      # معاينة شهادة
POST /api/certificates/save         # حفظ شهادة
POST /api/certificates/save-pdf     # حفظ PDF

# إدارة قاعدة البيانات
GET  /api/certificates/database     # بيانات الشهادات
```

### 6.7 Integration APIs
```

# التنبيهات
GET  /api/alerts                   # قائمة التنبيهات
POST /api/alerts                   # إضافة تنبيه

# إدارة الطلبات
GET  /api/enrollment/requests      # طلبات الانضمام
POST /api/enrollment/approve       # الموافقة على طلب
POST /api/enrollment/reject        # رفض طلب
```

---

## 7. التكاملات الخارجية المُفعلة

### 7.1 نظام الشهادات

#### إنشاء وتوليد الشهادات:
- **8 قوالب متاحة:** لأنواع مختلفة من الإنجازات
- **التوليد الفردي:** شهادة واحدة لطالبة محددة
- **التوليد المجمع:** حتى 2000 شهادة في دفعة واحدة
- **معاينة مسبقة:** قبل الإصدار النهائي

#### صفحة التحقق العامة (`/verify`):
```javascript
// مثال على رمز التحقق
const verificationCode = "SHM-2025-001234";

// عملية التحقق
async function verifyCertificate(code) {
  const certificate = await findCertificateByCode(code);
  if (certificate) {
    return {
      valid: true,
      studentName: certificate.studentName,
      courseName: certificate.courseName,
      issueDate: certificate.issueDate,
      template: certificate.templateType
    };
  }
  return { valid: false };
}
```

#### ميزات متقدمة:
- **حماية من التزوير:** رمز تحقق فريد ومشفر
- **أرشفة كاملة:** حفظ جميع الشهادات الصادرة
- **قوالب قابلة للتخصيص:** تعديل المواضع والألوان والخطوط

---

## 8. قواعد العمل والسياسات الداخلية

### 8.1 قوانين التقييم الأكاديمي

#### المعايير الأساسية:
- **الدرجة الكاملة:** 200 درجة موزعة على 5 أنواع تقييم
- **الحد الأدنى للنجاح:** 60% (120 درجة)
- **التقديرات:**
  - A+: 95% فأكثر (190+ درجة)
  - A: 90-94% (180-189 درجة)
  - B+: 85-89% (170-179 درجة)
  - B: 80-84% (160-169 درجة)
  - C+: 75-79% (150-159 درجة)
  - C: 70-74% (140-149 درجة)
  - D+: 65-69% (130-139 درجة)
  - D: 60-64% (120-129 درجة)
  - F: أقل من 60% (أقل من 120 درجة)

#### قواعد التقييم اليومي:
- **الانتظام:** يومي خلال أيام الدراسة (70 يوم)
- **التوثيق:** إجباري لجميع الدرجات
- **المراجعة:** يمكن تعديل الدرجات خلال 48 ساعة
- **الشفافية:** الطالبات يمكنهن مراجعة درجاتهن فوراً

#### معايير الاختبارات:
- **الأسبوعية:** كل أسبوع ما عدا الأسابيع 5، 9، 14
- **الشهرية:** 3 اختبارات في المواعيد المحددة
- **النهائية:** اختبار واحد في نهاية الفصل
- **الإعادة:** مسموحة للاختبارات الشهرية والنهائية فقط

### 8.2 سياسات النقاط التحفيزية

#### آلية المنح:
- **المهام الذاتية:** بناءً على تأكيد الطالبة
- **النقاط السلوكية:** بناءً على تقييم المعلمة
- **عدم الربط:** لا ترتبط بالدرجات الأكاديمية
- **التراكم:** نقاط تراكمية طوال الفصل

#### قواعد الاستبدال:
- **المكافآت المتاحة:** كتب، هدايا رمزية، شهادات تقدير
- **الحد الأدنى:** 100 نقطة للمكافأة الأولى
- **التوقيت:** في نهاية كل شهر
- **العدالة:** نفس المكافآت لجميع الطالبات

### 8.3 إجراءات الحضور والغياب

#### تسجيل الحضور:
- **التوقيت:** خلال أول 15 دقيقة من الحلقة
- **التأخير:** يُحتسب حضوراً مع تنبيه
- **الغياب:** يُسجل مع إمكانية إضافة سبب
- **الراحة:** للأعذار المقبولة

#### نسب الحضور المطلوبة:
- **الحد الأدنى:** 75% للاستمرار في الحلقة
- **التحذير الأول:** عند 80% حضور
- **التحذير الثاني:** عند 75% حضور
- **الفصل:** عند أقل من 75% حضور

### 8.4 معايير إصدار الشهادات

#### شروط الاستحقاق:
- **إتمام البرنامج:** 100% من المتطلبات
- **الدرجات:** حد أدنى 70% في الدرجة النهائية
- **الحضور:** حد أدنى 85% حضور
- **السلوك:** تقييم إيجابي من المعلمة

#### أنواع الشهادات:
- **شهادة إتمام:** للبرامج المكتملة
- **شهادة تفوق:** للدرجات العالية (90%+)
- **شهادة مشاركة:** للمشاركة الفعالة
- **شهادة حضور:** لحضور الدورات التدريبية

### 8.5 سياسات التواصل والإشعارات

#### قنوات التواصل:
- **النظام الداخلي:** للإشعارات الرسمية
- **البريد الإلكتروني:** للمراسلات الرسمية (مخطط مستقبلي)

#### آداب التواصل:
- **الاحترام:** تواصل محترم ومهني
- **الوقت المناسب:** من 8 صباحاً إلى 9 مساءً
- **اللغة:** العربية الفصحى أو العامية المهذبة
- **الخصوصية:** عدم مشاركة معلومات شخصية

---اج مزيد من الإصلاحات؟

### معلومة متضاربة #4: عدد الصفحات
- **المصدر الأول:** `MASTER_REFERENCE_2025_UPDATED.md` (4 سبتمبر) - 95+ صفحة
- **المصدر الثاني:** `mdfilesdate.md` (20 سبتمبر) - إشارات لصفحات إضافية
- **الحالة الحالية:** 43 صفحة موزعة (21 مدير + 14 معلمة + 8 طالبة)
- **السؤال للتوضيح:** ما هو العدد الدقيق للصفحات العاملة في النظام؟

### معلومة متضاربة #5: استراتيجية النشر
- **المصدر الأول:** `SERVER_DEPLOYMENT_GUIDE.md` (5 سبتمبر) - خطوات نشر تفصيلية
- **المصدر الثاني:** `CLAUDE.md` (20 سبتمبر) - بروتوكولات نشر مختلفة
- **الحالة الحالية:** النشر على https://shomokh.alothaimeen.xyz/
- **السؤال للتوضيح:** ما هي الطريقة المعتمدة لنشر التحديثات؟

### معلومة متضاربة #6: نظام النقاط التحفيزية
- **المصدر الأول:** `نظام الدرجات والنقاط.md` (غير مؤرخ) - 2450 نقطة إجمالي
- **المصدر الثاني:** `نظام الدرجات والتقييم الموحد اليومي.md` (31 أغسطس) - 45 نقطة يومياً
- **الحالة الحالية:** 2450 نقطة (1050 مهام + 1400 سلوكية)
- **السؤال للتوضيح:** كيف يتم حساب النقاط التحفيزية بالضبط؟

### معلومة متضاربة #7: معايير التسمية
- **المصدر الأول:** الملف القديم - خليط من title و name و camelCase
- **المصدر الثاني:** `SIMPLE_CONTEXT_BACKPACK.md` - camelCase موحد
- **الحالة المُصححة:** camelCase في كل مكان (userName, userEmail, programName, courseName)
- **القرار النهائي:** تم تطبيق معايير v3 الموحدة لتجنب انهيار v2

---

## ملاحق مرجعية

### أ. قائمة المصطلحات
- **حلقة:** الفصل الدراسي للقرآن الكريم
- **دفعة:** مجموعة من الطالبات تدرس معاً
- **برنامج:** المرحلة التعليمية (تأسيس، تمكين، إجازة)
- **نصاب:** الحد المطلوب للحفظ اليومي
- **رفيقة:** زميلة الدراسة للمراجعة المتبادلة

### ب. اختصارات النظام
- **API:** واجهة برمجة التطبيقات
- **CVRD:** بروتوكول التطوير (Check, Verify, Run, Deliver)
- **JWT:** رمز الجلسة المشفر
- **MCP:** أدوات المطور المتقدمة
- **PWA:** تطبيق ويب تقدمي

### ج. رموز الحالة والتقييم
- **الحضور:** ح (حاضر)، ث (متأخر)، خ (غائب)، ر (راحة)
- **المهام:** ✓ (مكتمل)، ✗ (غير مكتمل)
- **الطلبات:** pending (معلق)، approved (مقبول)، rejected (مرفوض)

### د. معايير الأداء المطلوبة
- **استجابة API:** < 500ms
- **تحميل الصفحة:** < 3 ثواني
- **وقت البناء:** < 30 ثانية
- **نسبة الخطأ:** < 0.1%
- **التوفر:** 99.9%

### هـ. بيانات الاختبار المعتمدة (محدثة)
```bash
# بيانات التسجيل المعتمدة لجميع البيئات
المدير (ADMIN):
  البريد الإلكتروني: admin@shamokh.edu
  كلمة المرور: admin123

المعلمة (TEACHER):
  البريد الإلكتروني: teacher1@shamokh.edu
  كلمة المرور: teacher123

الطالبة (STUDENT):
  البريد الإلكتروني: student1@shamokh.edu
  كلمة المرور: student123
```

### و. مبررات معايير camelCase المعتمدة

#### خلفية تاريخية:
تعرضت منصة شموخ v2 لانهيار كارثي بسبب عدم اتساق معايير التسمية، حيث تم خلط أنماط مختلفة (snake_case، camelCase، title، name) مما أدى إلى:
- أخطاء في ربط قاعدة البيانات مع الكود
- تضارب في APIs ونقاط النهاية
- صعوبة في الصيانة والتطوير
- فقدان البيانات في بعض الحالات

#### الحل المعتمد في v3:
**camelCase موحد في كل مكان** - لا استثناءات، لا تناقضات، لا خلط أنماط.

#### المبررات التقنية:
1. **الاتساق المطلق:** نفس النمط في قاعدة البيانات، الكود، وAPIs
2. **تقليل الأخطاء:** نمط واحد يقلل من أخطاء الكتابة والربط
3. **سهولة الصيانة:** مطورون جدد يمكنهم فهم النظام بسرعة
4. **التوافق مع TypeScript:** يتماشى مع معايير JavaScript/TypeScript
5. **الوضوح الدلالي:** `userName` أوضح من `name`، `passwordHash` أوضح من `password`

#### أمثلة التطبيق:
```typescript
// ✅ معايير v3 المصححة
interface User {
  userName: string;      // واضح ومحدد
  userEmail: string;     // متسق مع userName  
  passwordHash: string;  // واضح أنه مُشفر
}

interface Program {
  programName: string;   // متسق مع userName
}

interface Course {
  courseName: string;    // متسق مع النمط العام
}

// ❌ معايير v2 الخاطئة (تسببت في الانهيار)
interface User {
  name: string;          // غامض
  email: string;         // غير متسق مع name
  password: string;      // خطر أمني دلالي
}

interface Program {
  title: string;         // غير متسق مع User.name
}
```

---

## خاتمة المرجع

### الغرض من هذا الملف:
هذا المرجع يشكل الدليل الشامل والموحد لمنصة شموخ التعليمية في إصدارها الثالث المُصحح. يهدف إلى:

1. **توفير رؤية كاملة** للمشروع النهائي المطلوب الوصول إليه
2. **توحيد المعايير التقنية** لتجنب كوارث الإصدارات السابقة  
3. **توجيه عملية التطوير التدريجي** وفقاً للخطة المبسطة
4. **ضمان الاتساق** في جميع مراحل التطوير

### كيفية استخدام هذا المرجع:
- **للمطورين:** دليل شامل للمعايير والمتطلبات
- **للمخططين:** رؤية واضحة للهدف النهائي
- **للمراجعين:** معيار للتقييم والمقارنة
- **للصيانة:** مرجع للتحديثات المستقبلية

### التحديثات المستقبلية:
يُحدث هذا الملف عند:
- إضافة ميزات جديدة للمنصة
- تغيير المعايير التقنية
- حل التضاربات المكتشفة
- إضافة توضيحات مهمة

### ملاحظة مهمة:
هذا الملف يصف **الهدف النهائي** للمشروع، والذي سيتم الوصول إليه تدريجياً عبر **الجلسات العشر المحددة في الخطة المبسطة**. المطورون مدعوون لمراجعة الخطة المبسطة لفهم كيفية الوصول لهذا الهدف خطوة بخطوة.

---

*هذا المرجع يشكل الدليل الشامل والموحد لمنصة شموخ التعليمية v3، وقد تم تصحيح جميع المعايير التي تسببت في انهيار الإصدارات السابقة. يُحدث بانتظام ليعكس آخر التطورات والتحسينات في النظام.*

**تاريخ آخر تحديث:** 25 سبتمبر 2025  
**رقم الإصدار:** 3.0.0  
**حالة المراجعة:** مُصحح ومحدث - متوافق مع معايير v3  
**المسار:** `C:\Users\memm2\Documents\programming\shomokh3\`